{% extends 'admin/layout.html.twig' %}

{% block title %}V&G : Profile{% endblock %}

{% block body %}
    {% set user = app.user %}

    <h1>Modifier vos informations personnelles</h1>

    <form method="post" id="form_profile" action="{{ path('admin_utilisateur_profil') }}">
        <input type="hidden" name="comeFrom" id="comeFrom" value="{{ comeFrom ?? '' }}">

        <div class="card mb-3">
            <div class="card-header">
                <h4>Informations de connexion</h4>
            </div>
            <div class="card-body">
                <div class="row col-12">
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="email" class="form-label">E-mail :</label>
                        <input type="text" class="form-control" name="email" id="email" value="{{ utilisateur.email ?? '' }}" disabled>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="password" class="form-label">Mot de passe</label>
                        <input type="password" class="form-control" name="password" id="password" value="" placeholder="Renseigne pour modifier">
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="confirm" class="form-label">Confirmer le mot de passe</label>
                        <input type="password" class="form-control" name="confirm" id="confirm" value="" placeholder="Renseigne pour modifier">
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-3">
            <div class="card-header">
                <h4>Informations générales</h4>
            </div>
            <div class="card-body">
                <div class="row col-12">
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="nom" class="form-label">Nom :</label>
                        <input type="text" class="form-control" name="nom" id="nom" value="{{ utilisateur.nom ?? '' }}" required>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="prenom" class="form-label">Prénom :</label>
                        <input type="text" class="form-control" name="prenom" id="prenom" value="{{ utilisateur.prenom ?? '' }}" required>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="telephone" class="form-label">Téléphone :</label>
                        <input type="text" class="form-control" name="telephone" id="telephone" value="{{ utilisateur.telephone|formatTelFr }}" required>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_EMPLOYE') %}
                            <label for="poste" class="form-label">Poste :</label>
                            <input type="text" class="form-control" name="poste" id="poste" value="{{ utilisateur.poste }}">
                        {% endif %}
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="adresse" class="form-label">Adresse :</label>
                        <input type="text" class="form-control" name="adresse" id="adresse" value="{{ utilisateur.adresse ?? '' }}" required>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="code_postal" class="form-label">Code postal :</label>
                        <input type="text" class="form-control" name="code_postal" id="code_postal" value="{{ utilisateur.code_postal ?? '' }}" required>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="commune" class="form-label">Commune :</label>
                        <input type="text" class="form-control" name="commune" id="commune" value="{{ utilisateur.commune ?? '' }}" required>
                    </div>
                    <div class="mb-3 col-12 col-lg-3">
                        <label for="pays" class="form-label">Pays :</label>
                        <input type="text" class="form-control" name="pays" id="pays" value="{{ utilisateur.pays ?? '' }}" required>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-success">
                <i class="bi bi-floppy-fill"></i>&nbsp;Enregistrer
            </button>
        </div>
    </form>

{% endblock %}
